(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{299:function(s,t,a){s.exports=a.p+"assets/img/vite-base-1.452aa1f0.jpg"},300:function(s,t,a){s.exports=a.p+"assets/img/vite-base-2.648d6cec.jpg"},301:function(s,t,a){s.exports=a.p+"assets/img/vite-base-3.01d8a333.jpg"},302:function(s,t,a){s.exports=a.p+"assets/img/vite-alias-1.140f8651.jpg"},347:function(s,t,a){"use strict";a.r(t);var e=a(14),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[s._v("本文我们将介绍 Vite 一些常用的简单配置，更多复杂配置将会在后续的文章中一一介绍。")]),s._v(" "),t("h2",{attrs:{id:"root"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#root"}},[s._v("#")]),s._v(" root")]),s._v(" "),t("ul",[t("li",[s._v("类型：string")]),s._v(" "),t("li",[s._v("默认值：process.cwd()")])]),s._v(" "),t("p",[s._v("项目根目录（index.html 文件所在的位置）。可以是一个绝对路径，或者一个相对于该配置文件本身"),t("code",[s._v("(vite.config.ts)")]),s._v("的相对路径。")]),s._v(" "),t("h2",{attrs:{id:"base"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base"}},[s._v("#")]),s._v(" base")]),s._v(" "),t("ul",[t("li",[s._v("类型：string")]),s._v(" "),t("li",[s._v("默认值：/")])]),s._v(" "),t("p",[s._v("开发或生产环境服务的公共基础路径。可以是一个绝对 URL 路径名、完整的 URL 地址、空字符串或 "),t("code",[s._v("./")])]),s._v(" "),t("ol",[t("li",[s._v("绝对 URL 路径名")])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 base 为一个 绝对 URL 路径名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("base")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/test/'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("之后，我们查看打包之后的产物，可以发现资源引入的路径都发生来改变")]),s._v(" "),t("p",[t("img",{attrs:{src:a(299),alt:""}})]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("完整的 URL 地址")])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 base 为一个 完整的 URL 地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("base")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://www.cijianshaonian.com/'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("之后，我们查看打包之后的产物，可以发现资源都是引入指定 "),t("code",[s._v("URL")]),s._v(" 下的资源")]),s._v(" "),t("p",[t("img",{attrs:{src:a(300),alt:""}})]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("设置 base 为 "),t("code",[s._v("./")])])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 base 为一个 完整的 URL 地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("base")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("之后，我们查看打包之后的产物，可以发现资源都是引入相对路径下的文件")]),s._v(" "),t("p",[t("img",{attrs:{src:a(301),alt:""}})]),s._v(" "),t("h2",{attrs:{id:"mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mode"}},[s._v("#")]),s._v(" mode")]),s._v(" "),t("ul",[t("li",[s._v("类型：string")]),s._v(" "),t("li",[s._v("默认值：'development' 用于开发，'production' 用于构建")])]),s._v(" "),t("p",[s._v("用来指定当前是 "),t("code",[s._v("开发环境")]),s._v(" 还是 "),t("code",[s._v("生产环境")])]),s._v(" "),t("h2",{attrs:{id:"plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[s._v("#")]),s._v(" plugins")]),s._v(" "),t("ul",[t("li",[s._v("类型： "),t("code",[s._v("(Plugin | Plugin[] | Promise<Plugin | Plugin[]>)[]")])])]),s._v(" "),t("p",[s._v("需要用到的插件数组。Falsy 虚值的插件将被忽略，插件数组将被扁平化。")]),s._v(" "),t("h2",{attrs:{id:"publicdir"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#publicdir"}},[s._v("#")]),s._v(" publicDir")]),s._v(" "),t("ul",[t("li",[s._v("类型：string | false")]),s._v(" "),t("li",[s._v("默认值：'public'")])]),s._v(" "),t("p",[s._v("publicDir 用来指定静态资源服务的文件夹。 在开发期间，publicDir 目录中的文件以 "),t("code",[s._v("/")]),s._v(" 开头引用；在构建期间 publicDir 文件夹中的内容会被复制到 outDir 的根目录中。publicDir 可以是文件系统的绝对路径，也可以是相对于项目的根目录的相对路径。")]),s._v(" "),t("p",[s._v("将 publicDir 设为 false 可以关闭此项功能。")]),s._v(" "),t("h2",{attrs:{id:"resolve-alas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resolve-alas"}},[s._v("#")]),s._v(" resolve.alas")]),s._v(" "),t("ul",[t("li",[s._v("类型：Record<string, string> | Array<{ find: string | RegExp, replacement: string, customResolver?: ResolverFunction | ResolverObject }>")])]),s._v(" "),t("p",[s._v("resolve.alas 用来配置路径的别名。"),t("strong",[s._v("请始终使用绝对路径。相对路径的别名值会原封不动地被使用，因此无法被正常解析。")])]),s._v(" "),t("p",[s._v("例：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" defineConfig "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vite'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" react "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@vitejs/plugin-react'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" resolve "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("resolve\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("react")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 写法 1")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("alias")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'@'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 写法 2")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// alias: [{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   find: '@',")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   replacement: resolve(__dirname, 'src')")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// }]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("以上配置我们给 src 路径设置例别名 @，所以引用 src 下的文件就可以使用 @/*，我们修改一下 main.tsx 中 App 组件的引用：")]),s._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("- import App from './App'\n+ import App from '@/App'\n")])])]),t("p",[t("img",{attrs:{src:a(302),alt:""}})]),s._v(" "),t("p",[s._v("可以看到编辑器报出了一个错误，这其实是因为我们使用 TS 开发的，TS 并不知道我们的别名系统。所以，还需要在 "),t("code",[s._v("tsconfig")]),s._v(" 中修改一下配置：")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"compilerOptions"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"baseUrl"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"paths"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@/*"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"resolve-extensions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resolve-extensions"}},[s._v("#")]),s._v(" resolve.extensions")]),s._v(" "),t("ul",[t("li",[s._v("类型：string[]")]),s._v(" "),t("li",[s._v("默认值：['.mjs', '.js', '.ts', '.jsx', '.tsx', '.json']")])]),s._v(" "),t("p",[s._v("resolve.extensions 用来配置导入时想要省略的扩展名列表。")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("不建议忽略自定义导入类型的扩展名（例如：.vue），因为它会影响 IDE 和类型支持。")])]),s._v(" "),t("h2",{attrs:{id:"json-namedexports"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-namedexports"}},[s._v("#")]),s._v(" json.namedExports")]),s._v(" "),t("h2",{attrs:{id:"json-stringify"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-stringify"}},[s._v("#")]),s._v(" json.stringify")]),s._v(" "),t("h2",{attrs:{id:"esbuild"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#esbuild"}},[s._v("#")]),s._v(" esbuild")]),s._v(" "),t("h2",{attrs:{id:"envdir"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#envdir"}},[s._v("#")]),s._v(" envDir")]),s._v(" "),t("h2",{attrs:{id:"envprefix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#envprefix"}},[s._v("#")]),s._v(" envPrefix")])])}),[],!1,null,null,null);t.default=r.exports}}]);