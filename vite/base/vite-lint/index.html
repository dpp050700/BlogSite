<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前言 | 此间少年</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/BlogSite/icon.jpeg">
    <meta name="description" content="我的个人博客">
    
    <link rel="preload" href="/BlogSite/assets/css/0.styles.a8333bdb.css" as="style"><link rel="preload" href="/BlogSite/assets/js/app.e3baf8c3.js" as="script"><link rel="preload" href="/BlogSite/assets/js/2.1adb5bf4.js" as="script"><link rel="preload" href="/BlogSite/assets/js/12.51745bd0.js" as="script"><link rel="prefetch" href="/BlogSite/assets/js/10.0f79c507.js"><link rel="prefetch" href="/BlogSite/assets/js/11.e33447d8.js"><link rel="prefetch" href="/BlogSite/assets/js/13.3aad62b2.js"><link rel="prefetch" href="/BlogSite/assets/js/14.e9d8124f.js"><link rel="prefetch" href="/BlogSite/assets/js/15.49c94aaf.js"><link rel="prefetch" href="/BlogSite/assets/js/16.a8536b8f.js"><link rel="prefetch" href="/BlogSite/assets/js/17.f81256d1.js"><link rel="prefetch" href="/BlogSite/assets/js/18.614084a2.js"><link rel="prefetch" href="/BlogSite/assets/js/19.09faccb5.js"><link rel="prefetch" href="/BlogSite/assets/js/20.e41663bc.js"><link rel="prefetch" href="/BlogSite/assets/js/21.8fe9bfa9.js"><link rel="prefetch" href="/BlogSite/assets/js/22.7c5a954e.js"><link rel="prefetch" href="/BlogSite/assets/js/23.8c71a41c.js"><link rel="prefetch" href="/BlogSite/assets/js/24.664053fa.js"><link rel="prefetch" href="/BlogSite/assets/js/25.22cc6d2b.js"><link rel="prefetch" href="/BlogSite/assets/js/26.f7695692.js"><link rel="prefetch" href="/BlogSite/assets/js/27.d2324eb6.js"><link rel="prefetch" href="/BlogSite/assets/js/28.865cf5e4.js"><link rel="prefetch" href="/BlogSite/assets/js/29.4602e7f1.js"><link rel="prefetch" href="/BlogSite/assets/js/3.6a6cea5e.js"><link rel="prefetch" href="/BlogSite/assets/js/30.04177cd2.js"><link rel="prefetch" href="/BlogSite/assets/js/31.d1ca9dc6.js"><link rel="prefetch" href="/BlogSite/assets/js/32.35126b82.js"><link rel="prefetch" href="/BlogSite/assets/js/33.b9844e7a.js"><link rel="prefetch" href="/BlogSite/assets/js/34.4a9a16f3.js"><link rel="prefetch" href="/BlogSite/assets/js/35.f577039c.js"><link rel="prefetch" href="/BlogSite/assets/js/36.a9cb013f.js"><link rel="prefetch" href="/BlogSite/assets/js/37.fe8ccf24.js"><link rel="prefetch" href="/BlogSite/assets/js/38.11b7616e.js"><link rel="prefetch" href="/BlogSite/assets/js/39.750f8179.js"><link rel="prefetch" href="/BlogSite/assets/js/4.a7f2c281.js"><link rel="prefetch" href="/BlogSite/assets/js/40.77d5810b.js"><link rel="prefetch" href="/BlogSite/assets/js/41.113dde5b.js"><link rel="prefetch" href="/BlogSite/assets/js/42.f8652d72.js"><link rel="prefetch" href="/BlogSite/assets/js/43.8227a440.js"><link rel="prefetch" href="/BlogSite/assets/js/44.aab44c55.js"><link rel="prefetch" href="/BlogSite/assets/js/45.da6e12a9.js"><link rel="prefetch" href="/BlogSite/assets/js/46.3ca5212a.js"><link rel="prefetch" href="/BlogSite/assets/js/47.64b703e8.js"><link rel="prefetch" href="/BlogSite/assets/js/48.848198df.js"><link rel="prefetch" href="/BlogSite/assets/js/49.679726d5.js"><link rel="prefetch" href="/BlogSite/assets/js/5.b8f8e212.js"><link rel="prefetch" href="/BlogSite/assets/js/50.b8a8b208.js"><link rel="prefetch" href="/BlogSite/assets/js/51.6f82e002.js"><link rel="prefetch" href="/BlogSite/assets/js/6.6b18401c.js"><link rel="prefetch" href="/BlogSite/assets/js/7.2b91e179.js"><link rel="prefetch" href="/BlogSite/assets/js/8.47c95a3f.js"><link rel="prefetch" href="/BlogSite/assets/js/9.0e8e38ee.js">
    <link rel="stylesheet" href="/BlogSite/assets/css/0.styles.a8333bdb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BlogSite/" class="home-link router-link-active"><!----> <span class="site-name">此间少年</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端三剑客" class="dropdown-title"><span class="title">前端三剑客</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端三剑客" class="mobile-dropdown-title"><span class="title">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogSite/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/javascript/prototype/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/BlogSite/http/" class="nav-link">
  HTTP
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogSite/vue/" class="nav-link">
  vue2.0
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/vueNext/" class="nav-link">
  vue3.0
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/react/" class="nav-link">
  React源码分析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogSite/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/rollup/" class="nav-link">
  rollup
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/vite/" class="nav-link router-link-active">
  vite
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试分享" class="dropdown-title"><span class="title">面试分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试分享" class="mobile-dropdown-title"><span class="title">面试分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogSite/interviewQuestion/html/" class="nav-link">
  面试八股文
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/interviewCompany/company1/" class="nav-link">
  面试记录
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端三剑客" class="dropdown-title"><span class="title">前端三剑客</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端三剑客" class="mobile-dropdown-title"><span class="title">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogSite/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/javascript/prototype/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/BlogSite/http/" class="nav-link">
  HTTP
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogSite/vue/" class="nav-link">
  vue2.0
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/vueNext/" class="nav-link">
  vue3.0
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/react/" class="nav-link">
  React源码分析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogSite/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/rollup/" class="nav-link">
  rollup
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/vite/" class="nav-link router-link-active">
  vite
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试分享" class="dropdown-title"><span class="title">面试分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试分享" class="mobile-dropdown-title"><span class="title">面试分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogSite/interviewQuestion/html/" class="nav-link">
  面试八股文
</a></li><li class="dropdown-item"><!----> <a href="/BlogSite/interviewCompany/company1/" class="nav-link">
  面试记录
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/BlogSite/vite/" aria-current="page" class="sidebar-link">前言</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/BlogSite/vite/base/create-project/" class="sidebar-heading clickable open"><span>Vite 基础入门</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/BlogSite/vite/base/create-project/" class="sidebar-link">使用 Vite 快速搭建项目</a></li><li><a href="/BlogSite/vite/base/vite-config/" class="sidebar-link">Vite 配置项介绍</a></li><li><a href="/BlogSite/vite/base/vite-style/" class="sidebar-link">Vite 中接入现代化的 CSS 工程方案</a></li><li><a href="/BlogSite/vite/base/vite-lint/" aria-current="page" class="active sidebar-link">使用 Lint 工具规范代码</a></li><li><a href="/BlogSite/vite/base/vite-resources/" class="sidebar-link">如何处理图片资源</a></li></ul></section></li><li><a href="/BlogSite/vite/analysis/" class="sidebar-link">Vite 原理分析</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>本文我们将介绍如何在 Vite 中使用各种 Lint 工具。</p> <h2 id="eslint-js-ts-规范工具"><a href="#eslint-js-ts-规范工具" class="header-anchor">#</a> ESLint JS/TS 规范工具</h2> <p>首先我们需要安装 ESLint：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> eslint <span class="token parameter variable">-D</span>
</code></pre></div><p>接着执行 ESLint 的初始化命令，并按照提示进行配置选择：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>npx eslint <span class="token parameter variable">--init</span>
//或者
<span class="token function">npm</span> init @eslint/config
</code></pre></div><p><img src="/BlogSite/assets/img/vite-lint-1.49e1fb1c.jpg" alt=""></p> <p>接着 ESLint 会帮我们自动生成 <code>.eslintrc.js</code> 配置文件。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 环境提供预定义的全局变量。</span>
    <span class="token string-property property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 浏览器全局变量</span>
        <span class="token string-property property">&quot;es2021&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 添加所有 ECMAScript 2021 全局变量并自动将 ecmaVersion 解析器选项设置为 12。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 需要继承的 eslint 规则集</span>
    <span class="token string-property property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;plugin:react/recommended&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 解析器 用来解析 typescript</span>
    <span class="token string-property property">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 解析器选项</span>
    <span class="token string-property property">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 表示想使用的额外语言特性</span>
        <span class="token string-property property">&quot;ecmaFeatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// es6 版本</span>
        <span class="token string-property property">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;latest&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置 eslint 插件 这里只是扩展来 eslint 规则，但此时并没有开启规则，需要配置 extends 或者 rule 开启规则</span>
    <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@typescript-eslint&quot;</span> <span class="token comment">// 添加 TS 规则 @typescript-eslint/eslint-plugin，可省略 `eslint-plugin`</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;linebreak-style&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;unix&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;single&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token comment">// error 或 2 表示开启，违背规则后抛出 error； warn 或 1 表示开启，违背规则后警告； off 或 0 表示关闭</span>
            <span class="token string">&quot;always&quot;</span> <span class="token comment">// always 表示必须； never 表示从不</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;react&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;detect&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="配合-prettier"><a href="#配合-prettier" class="header-anchor">#</a> 配合 Prettier</h2> <p>首先我们来安装一下 Prettier:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> prettier <span class="token parameter variable">-D</span>
</code></pre></div><p>在项目根目录新建 <code>.prettierrc.cjs</code> 配置文件，填写如下的配置内容:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token comment">//一行的字符数，如果超过会进行换行，默认为80</span>
  <span class="token literal-property property">tabWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 一个 tab 代表几个空格数，默认为 2 个</span>
  <span class="token literal-property property">useTabs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否使用 tab 进行缩进，默认为false，表示用空格进行缩减</span>
  <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 字符串是否使用单引号，默认为 false，使用双引号</span>
  <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 行尾是否使用分号，默认为true</span>
  <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 是否使用尾逗号</span>
  <span class="token literal-property property">bracketSpacing</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 对象大括号直接是否有空格，默认为 true，效果：{ a: 1 }</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>接下来我们将Prettier集成到现有的ESLint工具中，首先安装两个工具包:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i eslint-config-prettier eslint-plugin-prettier <span class="token parameter variable">-D</span>
</code></pre></div><p>其中 <code>eslint-config-prettier</code> 用来覆盖 ESLint 本身的规则配置，而 <code>eslint-plugin-prettier</code> 则是用于让 Prettier 来接管 eslint --fix 即修复代码的能力。</p> <p>在 <code>.eslintrc.js</code> 配置文件中接入 prettier 的相关工具链，最终的配置代码如下所示:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 环境提供预定义的全局变量。</span>
    <span class="token string-property property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 浏览器全局变量</span>
        <span class="token string-property property">&quot;es2021&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 添加所有 ECMAScript 2021 全局变量并自动将 ecmaVersion 解析器选项设置为 12。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 需要继承的 eslint 规则集</span>
    <span class="token string-property property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;plugin:react/recommended&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;prettier&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;plugin:prettier/recommended&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 解析器 用来解析 typescript</span>
    <span class="token string-property property">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 解析器选项</span>
    <span class="token string-property property">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 表示想使用的额外语言特性</span>
        <span class="token string-property property">&quot;ecmaFeatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// es6 版本</span>
        <span class="token string-property property">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;latest&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置 eslint 插件 这里只是扩展来 eslint 规则，但此时并没有开启规则，需要配置 extends 或者 rule 开启规则</span>
    <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@typescript-eslint&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 添加 TS 规则 @typescript-eslint/eslint-plugin，可省略 `eslint-plugin`</span>
        <span class="token string">&quot;prettier&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;prettier/prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;react/react-in-jsx-scope&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 关掉此规则后 不需要引入 react</span>
        <span class="token string-property property">&quot;linebreak-style&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;unix&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;single&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token comment">// error 或 2 表示开启，违背规则后抛出 error； warn 或 1 表示开启，违背规则后警告； off 或 0 表示关闭</span>
            <span class="token string">&quot;always&quot;</span> <span class="token comment">// always 表示必须； never 表示从不</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;react&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;detect&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="在-vite-中接入-eslint"><a href="#在-vite-中接入-eslint" class="header-anchor">#</a> 在 Vite 中接入 ESLint</h2> <p>首先我们安装 Vite 中的 ESLint 插件:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i vite-plugin-eslint <span class="token parameter variable">-D</span>
</code></pre></div><p>然后在 <code>vite.config.ts</code> 中接入:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// vite.config.ts</span>
<span class="token keyword">import</span> eslint <span class="token keyword">from</span> <span class="token string">'vite-plugin-eslint'</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">eslint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="stylelint-样式规范工具"><a href="#stylelint-样式规范工具" class="header-anchor">#</a> Stylelint 样式规范工具</h2> <p>Stylelint 主要专注于样式代码的规范检查。与 ESLint 类似，在规范检查方面，Stylelint 已经做的足够专业，而在代码格式化方面，我们仍然需要结合 Prettier 一起来使用。</p> <p>首先让我们来安装 Stylelint 以及相应的工具套件：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i stylelint stylelint-prettier stylelint-config-prettier stylelint-config-recess-order stylelint-config-standard stylelint-config-standard-scss <span class="token parameter variable">-D</span>
</code></pre></div><p>然后，我们在 Stylelint 的配置文件.stylelintrc.js 中一一使用这些工具套件:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 注册 stylelint 的 prettier 插件</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'stylelint-prettier'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 继承一系列规则集合</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// standard 规则集合</span>
    <span class="token string">'stylelint-config-standard'</span><span class="token punctuation">,</span>
    <span class="token comment">// standard 规则集合的 scss 版本</span>
    <span class="token string">'stylelint-config-standard-scss'</span><span class="token punctuation">,</span>
    <span class="token comment">// 样式属性顺序规则</span>
    <span class="token string">'stylelint-config-recess-order'</span><span class="token punctuation">,</span>
    <span class="token comment">// 接入 Prettier 规则</span>
    <span class="token string">'stylelint-config-prettier'</span><span class="token punctuation">,</span>
    <span class="token string">'stylelint-prettier/recommended'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 配置 rules</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 开启 Prettier 自动格式化功能</span>
    <span class="token string-property property">'prettier/prettier'</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在 Vite 中集成 Stylelint，首先安装依赖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">pnpm</span> i vite-plugin-stylelint <span class="token parameter variable">-D</span>
</code></pre></div><p>然后在 Vite 配置文件中添加如下的内容:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> viteStylelint <span class="token keyword">from</span> <span class="token string">'vite-plugin-stylelint'</span><span class="token punctuation">;</span>

<span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">viteStylelint</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// ...options</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="husky-lint-staged-的-git-提交工作流集成"><a href="#husky-lint-staged-的-git-提交工作流集成" class="header-anchor">#</a> Husky + lint-staged 的 Git 提交工作流集成</h2> <p>首先我们需要安装一下 husky 这个工具:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i husky <span class="token parameter variable">-D</span>
</code></pre></div><p>值得提醒的是，有很多人推荐在package.json中配置 husky 的钩子:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run lint&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这种做法在 Husky 4.x 及以下版本没问题，而在最新版本(7.x 版本)中是无效的！在新版 Husky 版本中，我们需要做如下的事情:</p> <ol><li>初始化 Husky: npx husky install，并将 husky install 作为项目启动前脚本，如:</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 会在安装 npm 依赖后自动执行</span>
    <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>添加 Husky 钩子，在终端执行如下命令:</li> <li></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">&quot;npm run lint&quot;</span>
</code></pre></div><p>接着你将会在项目根目录的 .husky 目录中看到名为 pre-commit 的文件，里面包含了 git commit 前要执行的脚本。现在，当你执行 git commit 的时候，会首先执行 npm run lint脚本，通过 Lint 检查后才会正式提交代码记录。</p> <p>不过，刚才我们直接在 Husky 的钩子中执行 npm run lint，这会产生一个额外的问题: Husky 中每次执行 npm run lint 都对仓库中的代码进行全量检查，也就是说，即使某些文件并没有改动，也会走一次 Lint 检查，当项目代码越来越多的时候，提交的过程会越来越慢，影响开发体验。</p> <p>而 lint-staged 就是用来解决上述全量扫描问题的，可以实现只对存入暂存区的文件进行 Lint 检查，大大提高了提交代码的效率。首先，让我们安装一下对应的 npm 包:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> lint-staged
</code></pre></div><p>然后在 package.json中添加如下的配置:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;**/*.{js,jsx,tsx,ts}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;npm run lint:script&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;git add .&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;**/*.{scss}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;npm run lint:style&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;git add .&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来我们需要在 Husky 中应用 lint-stage，回到 .husky/pre-commit 脚本中，将原来的 npm run lint 换成如下脚本:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>npx <span class="token parameter variable">--no</span> -- lint-staged
</code></pre></div><p>如此一来，我们便实现了提交代码时的增量 Lint 检查。</p> <h2 id="commit-信息规范"><a href="#commit-信息规范" class="header-anchor">#</a> Commit 信息规范</h2> <p>除了代码规范检查之后，Git 提交信息的规范也是不容忽视的一个环节，规范的 commit 信息能够方便团队协作和问题定位。首先我们来安装一下需要的工具库，执行如下的命令:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i commitlint @commitlint/cli @commitlint/config-conventional <span class="token parameter variable">-D</span>
</code></pre></div><p>接下来新建 .commitlintrc.js ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .commitlintrc.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@commitlint/config-conventional&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>一般我们直接使用 @commitlint/config-conventional 规范集就可以了，它所规定的 commit 信息一般由两个部分: type 和 subject 组成，结构如下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// type 指提交的类型</span>
<span class="token comment">// subject 指提交的摘要信息</span>
<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>subject<span class="token operator">&gt;</span>
</code></pre></div><p>常用的 type 值包括如下:</p> <ul><li>feat: 添加新功能。</li> <li>fix: 修复 Bug。</li> <li>chore: 一些不影响功能的更改。</li> <li>docs: 专指文档的修改。</li> <li>perf: 性能方面的优化。</li> <li>refactor: 代码重构。</li> <li>test: 添加一些测试代码等等。</li></ul> <p>接下来我们将 commitlint 的功能集成到 Husky 的钩子当中，在终端执行如下命令即可:</p> <p>npx husky add .husky/commit-msg &quot;npx --no-install commitlint -e $HUSKY_GIT_PARAMS&quot;</p> <p>你可以发现在.husky目录下多出了 commit-msg 脚本文件，表示 commitlint 命令已经成功接入到 husky 的钩子当中。现在我们可以尝试对代码进行提交，假如输入一个错误的 commit 信息，commitlint 会自动抛出错误并退出。</p> <p>至此，我们便完成了 Git 提交信息的卡点扫描和规范检查。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BlogSite/vite/base/vite-style/" class="prev">
        Vite 中接入现代化的 CSS 工程方案
      </a></span> <span class="next"><a href="/BlogSite/vite/base/vite-resources/">
        如何处理图片资源
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/BlogSite/assets/js/app.e3baf8c3.js" defer></script><script src="/BlogSite/assets/js/2.1adb5bf4.js" defer></script><script src="/BlogSite/assets/js/12.51745bd0.js" defer></script>
  </body>
</html>
